<!DOCTYPE html > 
<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:tremn="http://java.sun.com/jsf/composite/components">
       
<h:form id="formContactObservation">

	<p:fieldset legend="Nova Observação" toggleable="true" collapsed="true">
		<h:panelGrid columns="4" cellpadding="10">
		
			<h:panelGrid>
				<p:outputLabel value="Responsável" />
				<h:outputText value="#{contactMB.newObservation.responsable}" styleClass="destak3" />
			</h:panelGrid>
		
			<h:panelGrid>
				<p:outputLabel for="inObs" value="Observação" />
				<p:inputTextarea id="inObs" value="#{contactMB.newObservation.observation}" rows="2" cols="50" required="true" />
				<p:message for="inObs" />
			</h:panelGrid>
			
			<p:commandButton icon="ui-icon-plus" value="Adicionar" style="font-size:1.25em"
				action="#{contactMB.saveObservation() }" 
				update="@form"
				/>

		</h:panelGrid>
	</p:fieldset>


	<p:spacer height="5" />


	<p:panel>

		<tremn:globalMessages />

		<h:outputText value="Não há observações" styleClass="warn" 
			rendered="#{empty contactMB.contact.observations}" 
			/>
			
		<p:dataTable value="#{contactMB.contact.observations}" var="obsVar"
			rendered="#{not empty contactMB.contact.observations}">
			
			<p:column headerText="Data" styleClass="col20p">
				<tremn:outputTimestamp value="#{obsVar.observationDate}" styleClass="less2" />
			</p:column>
		
			<p:column headerText="Responsábel" styleClass="col20p">
				<h:outputText value="#{obsVar.responsable}" styleClass="less2" />
			</p:column>

			<p:column headerText="Observação" styleClass="col60p">
				<h:outputText value="#{obsVar.observation}" styleClass="less1 wrapable" />
			</p:column>
		</p:dataTable>
	</p:panel>
</h:form>

</ui:fragment>